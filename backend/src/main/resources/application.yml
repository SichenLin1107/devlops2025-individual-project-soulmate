server:
  servlet:
    context-path: /

spring:
  application:
    name: soulmate
  profiles:
    active: ${SPRING_PROFILES_ACTIVE:dev}
  datasource:
    url: ${DATASOURCE_URL:jdbc:mysql://localhost:3306/soulmate_db?useSSL=false&serverTimezone=Asia/Shanghai&characterEncoding=UTF-8&allowPublicKeyRetrieval=true&useUnicode=true}
    username: ${DATASOURCE_USERNAME:root}
    password: ${DATASOURCE_PASSWORD:123456}
    driver-class-name: com.mysql.cj.jdbc.Driver
    hikari:
      minimum-idle: ${DB_POOL_MIN_IDLE:5}
      maximum-pool-size: ${DB_POOL_MAX_SIZE:20}
      connection-timeout: ${DB_CONNECTION_TIMEOUT:30000}
      idle-timeout: ${DB_IDLE_TIMEOUT:600000}
      max-lifetime: ${DB_MAX_LIFETIME:1800000}
  servlet:
    multipart:
      enabled: true
      max-file-size: 50MB
      max-request-size: 100MB
  jackson:
    time-zone: GMT+8
    date-format: yyyy-MM-dd HH:mm:ss
    default-property-inclusion: non_null

mybatis:
  mapper-locations: classpath:mapper/**/*.xml
  type-aliases-package: com.soulmate.module.*.entity
  configuration:
    log-impl: ${MYBATIS_LOG_IMPL:}
    map-underscore-to-camel-case: true

jwt:
  secret: ${JWT_SECRET:soulmate_jwt_secret_key_2024_please_change_in_production}
  expiration: ${JWT_EXPIRATION:86400000}

encryption:
  secret-key: ${ENCRYPTION_SECRET_KEY:soulmate_encryption_key_2024_please_change_in_production_32bytes}

rag:
  service:
    base-url: ${RAG_SERVICE_URL:http://localhost:8000}
    connect-timeout: ${RAG_CONNECT_TIMEOUT:30000}
    read-timeout: ${RAG_READ_TIMEOUT:300000}

file:
  upload:
    base-path: ${FILE_UPLOAD_PATH:./uploads}
    avatar-path: ${file.upload.base-path}/avatars
    knowledge-path: ${file.upload.base-path}/knowledge
    allowed-types: txt,md,pdf,doc,docx

knowledge:
  segment:
    chunk-size: ${KNOWLEDGE_CHUNK_SIZE:200}
    chunk-overlap: ${KNOWLEDGE_CHUNK_OVERLAP:50}

logging:
  level:
    root: ${LOG_LEVEL:INFO}
    com.soulmate: ${APP_LOG_LEVEL:INFO}
    com.soulmate.module.*.mapper: ${MAPPER_LOG_LEVEL:INFO}

springdoc:
  api-docs:
    enabled: ${ENABLE_SWAGGER:true}
    path: /v3/api-docs
  swagger-ui:
    enabled: ${ENABLE_SWAGGER:true}
    path: /swagger-ui.html
    url: /v3/api-docs
    config-url: /v3/api-docs/swagger-config
    disable-swagger-default-url: true
  show-actuator: false
  default-consumes-media-type: application/json
  default-produces-media-type: application/json

management:
  endpoints:
    web:
      exposure:
        include: health,info,metrics
  endpoint:
    health:
      show-details: ${HEALTH_SHOW_DETAILS:when_authorized}
      